import{r,j as e,a as m,L as ht,g as Q,c as le,d as mt,b as P,S as ge,e as Re,C as pt,u as gt,f as _t,Q as V}from"./index-ab00a411.js";import{A as ft,u as Ve,P as ze,C as Ie,D as ie,g as vt,a as bt}from"./Document-fb22acf2.js";import{u as Oe}from"./index.esm-653aca94.js";const wt=t=>{r.useEffect(()=>{!document||!t||document.title===t||(document.title=t)},[t])},kt="_header_1qudc_1",xt="_logo_1qudc_12",Te={header:kt,logo:xt},Ct=({user:t,title:n,children:o,logout:c,toggleTitle:u})=>e(r.Fragment,{children:m("div",{className:Te.header,children:[m("div",{className:Te.logo,children:[e(ht,{to:"/document/list",children:e("img",{src:Q("/logo.png")})}),e("span",{onClick:u,children:n})]}),o,e(ft,{user:t,logout:c})]})}),Lt="_enter_1a00t_1",$t="_menu_1a00t_1",yt="_fadeIn_1a00t_1",St="_exit_1a00t_5",Nt="_container_1a00t_9",ue={enter:Lt,menu:$t,fadeIn:yt,exit:St,container:Nt},ce=({selector:t,children:n,className:o,placement:c="top",...u})=>{let[a,h]=r.useState(null),[d,s]=r.useState(null),[g,k]=r.useState(!1);const{attributes:E,styles:f}=Ve(a,d,{placement:c,modifiers:[{name:"offset",options:{offset:[0,10]}}]}),L=()=>{k(!0)},v=()=>{k(!1)};return r.useEffect(()=>{if(t.length===0)return;let x=document.querySelector(t);x&&(x.onmouseenter=L,x.onmouseleave=v,h(x))},[t]),e(ze,{children:e(Ie,{in:g,timeout:300,classNames:{enterActive:ue.enter,exitActive:ue.exit},unmountOnExit:!0,children:e("div",{ref:s,className:`${ue.container} ${o||""}`.trim(),style:{...f.popper},...E.popper,...u,children:e("div",{className:ue.menu,children:n})})})})},Mt="_enter_10q2k_1",Et="_fadeIn_10q2k_1",Rt="_exit_10q2k_5",Ae={enter:Mt,fadeIn:Et,exit:Rt},_e=({children:t,selector:n,isOpen:o,placement:c="right",toggle:u,...a})=>{let[h,d]=r.useState(null),[s,g]=r.useState(null);const{attributes:k,styles:E}=Ve(h,s,{placement:c,modifiers:[{name:"offset",options:{offset:[0,10]}}]});r.useLayoutEffect(()=>{let L=document.querySelector(n);L&&d(L)},[]);const f=L=>{L&&le({ref:L,onClose:u,doNotClose:v=>h?h.contains(v):!1})};return e(ze,{children:e(Ie,{in:o,timeout:200,unmountOnExit:!0,classNames:{enterActive:Ae.enter,exitActive:Ae.exit},onEntered:f,children:e("div",{ref:g,style:{...E.popper},...k.popper,...a,children:t})})})};let pe=[{label:"Circle",type:"circle",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M12,22 C17.5228475,22 22,17.5228475 22,12 C22,6.4771525 17.5228475,2 12,2 C6.4771525,2 2,6.4771525 2,12 C2,17.5228475 6.4771525,22 12,22 Z M12,20 C7.581722,20 4,16.418278 4,12 C4,7.581722 7.581722,4 12,4 C16.418278,4 20,7.581722 20,12 C20,16.418278 16.418278,20 12,20 Z"})]})},{label:"Square",type:"square",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M2,2 L22,2 L22,22 L2,22 L2,2 Z M4,4 L4,20 L20,20 L20,4 L4,4 Z"})]})},{label:"Triangle",type:"triangle",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M2,22 L11.99,2 L22,22 L2,22 Z M11.9917889,6.47213631 L5.23462094,20 L18.7624846,20 L11.9917889,6.47213631 Z"})]})},{label:"Diamond",type:"diamond",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M2,12 L11.99,2 L22,12 L11.99,22 L2,12 Z M11.9914142,19.1715725 L19.1701583,12 L11.9914142,4.82842748 L4.82701326,12 L11.9914142,19.1715725 Z"})]})},{label:"Arrow",type:"arrow",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M12,2 L12,5.33333333 L2,5.33333333 L2,18.6666667 L12,18.6666667 L12,22 L22,11.9901333 L12,2 Z M19.1715725,11.9915287 L14,17.1682038 L14,16.6666667 L4,16.6666667 L4,7.33333333 L14,7.33333333 L14,6.82505878 L19.1715725,11.9915287 Z"})]})},{label:"Rectangle",type:"rectangle",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{strokeWidth:"1",d:"M2,7 L22,7 L22,17 L2,17 L2,7 Z M4,9 L4,15 L20,15 L20,9 L4,9 Z"})]})}],zt=[{label:"sketch",svg:void 0},{label:"Erase",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{d:"M17.26 18l-2 2h6.7v-2h-4.7zm4.15-6.67L13.04 20H4.73l-2.15-2.14c-.78-.78-.78-2.03 0-2.82L13.62 3.58c.78-.77 2.06-.77 2.84 0l4.95 4.93c.79.78.79 2.04 0 2.82z"})]})},{label:"Select",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("polygon",{points:"12.926 12 17.5 20 15 21.5 10.405 13.595 6 18 6 2 19 12"})]})},{label:"Sticky note",svg:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",children:e("path",{d:"M20,16V4H4v16h12v-2c0-1.1,0.9-2,2-2H20z M4,2h16c1.1,0,2,0.9,2,2v13l-5,5H4c-1.1,0-2-0.9-2-2V4 C2,2.9,2.9,2,4,2z M7,8h10v2H7V8z M7,12h6v2H7V12z"})})},{label:"shape",svg:void 0},{label:"Text Box",svg:e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:e("path",{style:{strokeWidth:1},d:"M21,17 L23,17 L23,23 L17,23 L17,21 L7,21 L7,23 L1,23 L1,17 L3,17 L3,7 L1,7 L1,1 L7,1 L7,3 L17,3 L17,1 L23,1 L23,7 L21,7 L21,17 Z M21,19 L19,19 L19,21 L21,21 L21,19 Z M17,19 L17,17 L19,17 L19,7 L17,7 L17,5 L7,5 L7,7 L5,7 L5,17 L7,17 L7,19 L17,19 Z M21,5 L21,3 L19,3 L19,5 L21,5 Z M5,21 L5,19 L3,19 L3,21 L5,21 Z M3,5 L5,5 L5,3 L3,3 L3,5 Z M13,10 L13,16 L11,16 L11,10 L8,10 L8,8 L16,8 L16,10 L13,10 Z",fillRule:"nonzero"})})}],Ye=[{label:"Pen",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M24 0v24H0V0h24z"}),e("path",{d:"M3 17.25V21h3.74l7.54-7.53-3.75-3.75L3 17.25zM18.37 3.3l2.34 2.33c.39.39.4 1.03.01 1.42l-5.37 5.36-3.76-3.76 2.53-2.53-.73-.73-5.66 5.66-1.4-1.4 6.37-6.36c.39-.39 1.04-.38 1.42.01l1.42 1.41 1.42-1.41c.38-.39 1.02-.39 1.41 0z"})]})},{label:"Marker",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M0 0h24v24H0V0z"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M9.7 9.49l4.29 4.3-6.54 6.54-.72-.72-1.43 1.43c-.79.79-2.07.79-2.86 0s-.79-2.08 0-2.86l1.43-1.43-.72-.72L9.7 9.49zm11.56-5.8L19.8 2.22c-.78-.78-2.05-.78-2.83 0l-6.21 6.21 4.29 4.3 6.21-6.21c.79-.78.79-2.05 0-2.83z"})]})},{label:"Highlighter",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:[e("path",{fill:"none",d:"M0 0h24v24H0V0z"}),e("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M10.22 9.49l-5.91 6c-.77.8-.7 2.05.08 2.85L.77 22h5.68l.74-.75c.78.81 1.95.86 2.73.05l5.96-6.05-5.66-5.76zm12.46-4l-2.82-2.87c-.78-.8-2.07-.84-2.84-.04l-5.75 5.85 5.66 5.75 5.69-5.78c.77-.81.83-2.11.06-2.91z"})]})},{label:"Brush",svg:m("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24px",height:"24px",viewBox:"0 0 24 24",children:[e("path",{d:"M0 0h24v24H0z",fill:"none"}),e("path",{d:"M7 14c-1.66 0-3 1.34-3 3 0 1.31-1.16 2-2 2 .92 1.22 2.49 2 4 2 2.21 0 4-1.79 4-4 0-1.66-1.34-3-3-3zm13.71-9.37l-1.34-1.34c-.39-.39-1.02-.39-1.41 0L9 12.25 11.75 15l8.96-8.96c.39-.39.39-1.02 0-1.41z"})]})}],fe=[{label:"Black",colorCode:"#262626",lightColorCode:"#b1b3b4"},{label:"Blue",colorCode:"#19ACC0",lightColorCode:"#99dee6"},{label:"Green",colorCode:"#699E3E",lightColorCode:"#c3d9af"},{label:"Yellow",colorCode:"#F3B32A",lightColorCode:"#fbe199"},{label:"Red",colorCode:"#D9453C",lightColorCode:"#f1b4af"},{label:"White",colorCode:"#FFFFFF",lightColorCode:"#FFFFFF"}];const It=[{label:"Default",bgCode:"default"},{label:"Dots",bgCode:"dots"},{label:"Blue line",bgCode:"blue-line"},{label:"Blue graph",bgCode:"blue-graph"},{label:"Gray graph",bgCode:"gray-graph"},{label:"Blueboard",bgCode:"blue-board"},{label:"Chalkboard",bgCode:"chalk-board"}],Bt="_container_kg945_1",Dt="_sketch_kg945_6",Ft="_color_kg945_7",qt="_active_kg945_20",ye={container:Bt,sketch:Dt,color:Ft,active:qt},Tt=({isOpen:t,sketch:n,sketchColor:o,toggle:c,onSelectSketch:u,onSelectSketchColor:a})=>{let h=r.useRef(null);r.useEffect(()=>{if(!h.current||!t)return;let s=le({ref:h.current,onClose:c,doNotClose:g=>{var k;return(k=h.current)==null?void 0:k.contains(g)}});return()=>{s()}},[t]);let d=s=>{a(s),c()};return e(_e,{className:ye.container,isOpen:t,selector:"#sketches",toggle:c,children:e("div",{ref:h,className:ye.color,children:fe.map(({label:s,colorCode:g},k)=>{let E=k===o?ye.active:void 0;return m(r.Fragment,{children:[e("button",{id:`color-${k}`,className:E,onClick:()=>d(k),children:e("span",{style:{backgroundColor:g}})}),e(ce,{selector:`#color-${k}`,placement:"bottom",children:s})]},k)})})})},At="_container_16s3w_1",Yt="_shape_16s3w_6",Zt="_active_16s3w_21",Ze={container:At,shape:Yt,active:Zt},Ht=({shape:t,isOpen:n,toggle:o,onSelectShape:c})=>{let u=r.useRef(null);r.useEffect(()=>{if(!u.current||!n)return;let h=le({ref:u.current,onClose:o,doNotClose:d=>{var s;return(s=u.current)==null?void 0:s.contains(d)}});return()=>{h()}},[n]);let a=h=>{c(h),o()};return e(_e,{className:Ze.container,isOpen:n,selector:"#shapes",toggle:o,children:e("div",{ref:u,className:Ze.shape,children:pe.map(({label:h,svg:d},s)=>m(r.Fragment,{children:[e("button",{id:`shape-${s}`,onClick:()=>a(s),children:d}),e(ce,{selector:`#shape-${s}`,placement:"bottom",children:h})]},s))})})},Vt="_container_xh1kp_1",Ot="_bg_xh1kp_6",Xt="_active_xh1kp_30",Se={container:Vt,bg:Ot,active:Xt},Gt=({background:t,isOpen:n,toggle:o,onSelectBackGround:c})=>{let u=r.useRef(null);r.useEffect(()=>{if(!u.current||!n)return;let h=le({ref:u.current,onClose:o,doNotClose:d=>{var s;return(s=u.current)==null?void 0:s.contains(d)}});return()=>{h()}},[n]);let a=h=>{c(h),o()};return e(_e,{className:Se.container,isOpen:n,selector:"#backgrounds",placement:"bottom-start",toggle:o,children:e("div",{ref:u,className:Se.bg,children:It.map(({label:h,bgCode:d},s)=>{let g=t===d;return m(r.Fragment,{children:[e("button",{id:`background-${s}`,onClick:()=>a(d),className:g?Se.active:void 0,style:{"--bg":`url(${Q(`/background-icon/${d}.svg`)})`},children:g&&e("img",{src:Q("/check.svg")})}),e(ce,{selector:`#background-${s}`,placement:"bottom",children:h})]},s)})})})},Wt="_container_1xzpo_1",Ut="_color_1xzpo_6",Pt="_active_1xzpo_18",Ne={container:Wt,color:Ut,active:Pt},He=({id:t,isOpen:n,color:o,toggle:c,onSelectColor:u})=>{let a=r.useRef(null);r.useEffect(()=>{if(!a.current||!n)return;let d=le({ref:a.current,onClose:c,doNotClose:s=>{var g;return(g=a.current)==null?void 0:g.contains(s)}});return()=>{d()}},[n]);let h=d=>{u(d),c()};return e(_e,{id:`${t}-dropdown`,className:Ne.container,isOpen:n,selector:`#${t}`,placement:"bottom-start",toggle:c,children:e("div",{ref:a,className:Ne.color,children:fe.map(({label:d,colorCode:s,lightColorCode:g},k)=>{let E=t==="background"?g:s,f=E===o?Ne.active:void 0;return m(r.Fragment,{children:[e("button",{id:`${t}-${k}`,className:f,onClick:()=>h(E),children:e("span",{style:{backgroundColor:E}})}),e(ce,{selector:`#${t}-${k}`,placement:"bottom",children:d})]},k)})})})},jt="_container_8wfdu_1",Jt="_active_8wfdu_29",Qt="_toolbar_8wfdu_54",Kt="_zoom_in_8wfdu_65",en="_zoom_out_8wfdu_66",tn="_redo_8wfdu_69",nn="_undo_8wfdu_70",rn="_background_btn_8wfdu_86",ln="_clear_btn_8wfdu_87",on="_separator_8wfdu_90",an="_color_btn_8wfdu_95",A={container:jt,active:Jt,toolbar:Qt,zoom_in:Kt,zoom_out:en,redo:tn,undo:nn,background_btn:rn,clear_btn:ln,separator:on,color_btn:an},sn=({tool:t,sketch:n,shape:o,sketchColor:c,slideBackGround:u,borderColor:a,backgroundColor:h,selectedShapeId:d,onClearSlide:s,onSelectTool:g,onSelectShape:k,onSelectSketch:E,onSelectSketchColor:f,onSelectBackGround:L,onSelectBorderColor:v,onSelectBackGroundColor:x})=>{let[S,z]=r.useState(!1),[w,O]=r.useState(!1),[N,Y]=r.useState(!1),[b,$]=r.useState(!1),[C,I]=r.useState(!1),Z=()=>{Y(!N)},y=()=>{z(!S)},X=()=>{O(!w)},j=()=>{I(!C)},H=()=>{$(!b)},R=(_,F)=>{(F==="shape"||F==="sketch")&&t===_&&(F==="shape"?y():F==="sketch"&&X()),t!==_&&g(_)};return m(r.Fragment,{children:[m("div",{className:A.toolbar,children:[e("button",{className:A.redo,disabled:!0,children:e("i",{className:"bx-undo"})}),e("button",{className:A.undo,disabled:!0,children:e("i",{className:"bx-redo"})}),e("div",{className:A.separator}),e("button",{className:A.zoom_out,children:e("i",{className:"bx-zoom-out"})}),e("button",{className:A.zoom_in,children:e("i",{className:"bx-zoom-in"})}),e("div",{className:A.separator}),t!==4&&t!==5&&!d&&m(r.Fragment,{children:[e("button",{id:"backgrounds",className:A.background_btn,onClick:Z,children:"Set background"}),e("div",{className:A.separator}),e("button",{className:A.clear_btn,onClick:s,children:"Clear frame"})]}),(t===4||d)&&m("div",{className:A.color_btn,children:[e("button",{id:"border",onClick:H,style:{"--bg":a},children:e("i",{className:"bxs-pencil"})}),e("button",{id:"background",onClick:j,style:{"--bg":h},children:e("i",{className:"bxs-color-fill"})})]})]}),e("div",{className:A.container,children:zt.map(({label:_,svg:F},G)=>{let ve=_==="shape"?pe[o].svg:_==="sketch"?Ye[n].svg:F,be=_==="shape"?pe[o].label:_==="sketch"?Ye[n].label:_,we=G===t?A.active:void 0,ke=_==="shape"?"shapes":_==="sketch"?"sketches":`toolbar-${G}`,xe=_==="sketch"?fe[c].colorCode:void 0;return m(r.Fragment,{children:[m("button",{id:ke,className:we,onClick:()=>R(G,_),style:{"--bgColor":xe},children:[ve,(_==="shape"||_==="sketch")&&e("i",{className:"bxs-right-arrow"})]}),e(ce,{selector:`#toolbar-${G}`,placement:"right",children:be})]},G)})}),S&&e(Ht,{isOpen:S,shape:o,toggle:y,onSelectShape:k}),w&&e(Tt,{isOpen:w,sketch:n,sketchColor:c,toggle:X,onSelectSketch:E,onSelectSketchColor:f}),N&&e(Gt,{isOpen:N,background:u,toggle:Z,onSelectBackGround:L}),b&&e(He,{id:"border",isOpen:b,color:a,toggle:H,onSelectColor:_=>v("borderColor",_)}),C&&e(He,{id:"background",isOpen:C,color:h,toggle:j,onSelectColor:_=>x("backgroundColor",_)})]})},cn="_sketch_board_1qh03_1",dn={sketch_board:cn},un=({tool:t,sketch:n,sketchColor:o,canvas:c,dimension:u,isActiveSlide:a=!1,onUpdateCanvas:h})=>{let d=r.useRef(null),s=r.useRef(null),g=r.useRef(null);r.useEffect(()=>{c.image&&L()},[]),r.useEffect(()=>{if(!d.current)return;s.current=d.current.getContext("2d");let x=document.querySelector(`[mini-canvas='${c._id}']`);x&&(g.current=x.getContext("2d"))},[]),r.useEffect(()=>{s.current.strokeStyle=t===6?"#FF3131":fe[o].colorCode,s.current.lineWidth=5,s.current.lineCap="round",s.current.lineJoin="round"},[o,t]);let k=({pageX:x,pageY:S})=>{if(!d.current||!s.current)return;let{left:z,top:w,width:O,height:N}=d.current.getBoundingClientRect(),Y=u.width/O,b=u.height/N,$=(x-z)*Y,C=(S-w)*b;s.current.beginPath(),s.current.moveTo($,C),g.current&&(g.current.beginPath(),g.current.moveTo($,C)),window.addEventListener("mousemove",E),window.addEventListener("mouseup",f,{once:!0})},E=({x,y:S})=>{if(!d.current||!s.current)return;let{left:z,top:w,width:O,height:N}=d.current.getBoundingClientRect(),Y=u.width/O,b=u.height/N,$=(x-z)*Y,C=(S-w)*b;t===0||t==6?(s.current.lineTo($,C),s.current.stroke(),g.current&&(g.current.lineTo($,C),g.current.stroke())):t===1&&(s.current.clearRect($,C,20,20),g.current&&g.current.clearRect($,C,20,20))},f=()=>{d.current&&(window.removeEventListener("mousemove",E),d.current.toBlob(x=>{x&&h(c._id,x)},"image/png"))},L=()=>{let x=new Image;x.src=`data:image/png;base64,${c.image}`,x.onload=()=>{s.current&&(s.current.drawImage(x,0,0),g.current&&g.current.drawImage(x,0,0))}},v=x=>{[0,1,6].includes(t)&&x.preventDefault()};return e("canvas",{ref:d,className:dn.sketch_board,width:u.width,height:u.height,"data-canvas":c._id,style:{pointerEvents:[0,1,6].includes(t)?"auto":"none"},onContextMenu:v,...[0,1,6].includes(t)&&a&&{onMouseDown:k}})},Xe=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("ellipse",{cx:t/2,cy:n/2,rx:t/3,ry:n/3,style:{stroke:o,fill:c}})}),Ge=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("path",{d:`M${t/2} ${n} L${t/2} ${n} L0 ${n/2} L${t/2} 0 L${t} ${n/2} Z`,style:{stroke:o,fill:c}})}),We=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("path",{d:`M0 0 L0 0 L0 ${n} L${t} ${n} L${t} 0 Z`,style:{stroke:o,fill:c}})}),Ue=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("path",{d:`M0 0 L0 0 L0 ${n} L${t} ${n} L${t} 0 Z`,style:{stroke:o,fill:c}})}),Pe=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("path",{d:`M${t} ${n} L${t} ${n} L0 ${n} L${t/2} 0 Z`,style:{stroke:o,fill:c}})}),je=({width:t,height:n,borderColor:o,backgroundColor:c})=>e("svg",{xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"xMidYMid meet",overflow:"visible",children:e("path",{d:`M${t} ${n/2} L${t} ${n/2} L${t/2} 0 L${t/2} ${n/6} L0 ${n/6} L0 ${n-n/6} L${t/2} ${n-n/6} L${t/2} ${n} Z`,style:{stroke:o,fill:c}})}),hn="_container_3vyrp_1",mn={container:hn},Je=({text:t,...n})=>e("div",{className:mn.container,...n,children:e("h2",{children:t})}),pn="_field_ak0ir_1",gn={field:pn},Qe=({readOnly:t,...n})=>{let o=r.useRef(null);return r.useEffect(()=>{!o.current||t||o.current.focus()},[t]),e("textarea",{ref:o,className:gn.field,readOnly:t,...n})},_n="_container_cn33k_1",fn="_top_start_cn33k_37",vn="_bottom_start_cn33k_38",bn="_bottom_end_cn33k_39",wn="_top_cn33k_37",kn="_bottom_cn33k_38",xn="_left_cn33k_54",Cn="_right_cn33k_55",Ln="_top_end_cn33k_83",W={container:_n,top_start:fn,bottom_start:vn,bottom_end:bn,top:wn,bottom:kn,left:xn,right:Cn,top_end:Ln},$n=({shapeId:t,shapeProps:n,shapeRef:o,onClose:c,onMouseDown:u,onReset:a})=>{let h=r.useRef(null);r.useEffect(()=>{if(!o)return;let f=le({ref:o,onClose:c,doNotClose:L=>{if(!h.current||!o)return;let x=[...document.querySelectorAll("#border,#background,#border-dropdown,#background-dropdown,#edit-sticky-note")].some(S=>S.contains(L));return h.current.contains(L)||o.contains(L)||x}});return()=>{f(),a()}},[]);let{width:d,height:s,translateX:g,translateY:k,rotate:E}=n;return m("div",{ref:h,className:W.container,style:{width:`${d+30}px`,height:`${s+30}px`,transform:`translate(${g}px, ${k}px) rotate(${E}deg)`},children:[e("button",{className:W.top_start,onMouseDown:f=>u(f,"rotate"),children:e("img",{src:Q("/rotate.svg"),alt:"",draggable:!1})}),e("button",{className:W.top,onMouseDown:f=>u(f,"top")}),e("button",{"shape-id":t,className:W.top_end,children:e("i",{className:"bx-dots-vertical-rounded"})}),e("button",{className:W.left,onMouseDown:f=>u(f,"left")}),e("button",{className:W.right,onMouseDown:f=>u(f,"right")}),e("button",{className:W.bottom_start,onMouseDown:f=>u(f,"bottom-start")}),e("button",{className:W.bottom,onMouseDown:f=>u(f,"bottom")}),e("button",{className:W.bottom_end,onMouseDown:f=>u(f,"bottom-end")})]})},yn="_container_1igfo_1",Sn="_overlay_1igfo_7",Ee={container:yn,overlay:Sn},Nn=({shape:t,selectedShapeId:n,onClick:o,onBlur:c,onUpdateShape:u})=>{let[a,h]=r.useState(null),[d,s]=r.useState(!0),g=r.useRef(null),k=r.useRef(null),E=mt(b=>u(b),1e3);r.useEffect(()=>{h(t.props)},[t.props]);let f=({target:{value:b,scrollHeight:$}})=>{if(!a)return;let C={...a,height:$,text:b};E({_id:t._id,props:C}),h(C)},L=r.useMemo(()=>{if(!a)return null;let{width:b,height:$,borderColor:C,backgroundColor:I,text:Z}=a;switch(t.type){case"sticky-note":return e(Je,{text:Z,style:{backgroundColor:I}});case"text-box":return e(Qe,{defaultValue:Z,readOnly:d,onChange:f});case"arrow":return e(je,{width:b,height:$,borderColor:C,backgroundColor:I});case"circle":return e(Xe,{width:b,height:$,borderColor:C,backgroundColor:I});case"diamond":return e(Ge,{width:b,height:$,borderColor:C,backgroundColor:I});case"rectangle":return e(We,{width:b,height:$,borderColor:C,backgroundColor:I});case"square":return e(Ue,{width:b,height:$,borderColor:C,backgroundColor:I});case"triangle":return e(Pe,{width:b,height:$,borderColor:C,backgroundColor:I});default:return null}},[t.type,a==null?void 0:a.width,a==null?void 0:a.height,a==null?void 0:a.backgroundColor,a==null?void 0:a.borderColor,a==null?void 0:a.color,a==null?void 0:a.text,d]),v=({x:b,y:$})=>{if(!a||!k.current||!g.current)return;let{pageX:C,pageY:I,type:Z}=k.current,y={...a},{width:X,height:j}=g.current.parentElement.getBoundingClientRect(),{clientWidth:H,clientHeight:R}=g.current.parentElement,_=H/X,F=R/j;switch(Z){case"move":y.translateX+=(b-C)*_,y.translateY+=($-I)*F;break;case"rotate":break;case"left":y.translateX+=(b-C)*_,y.width+=-(b-C)*_;break;case"right":y.width+=(b-C)*_;break;case"bottom":y.height+=($-I)*F;break;case"top":y.translateY+=($-I)*F,y.height+=-($-I)*F;break;case"bottom-start":y.translateX+=(b-C)*_,y.width+=-(b-C)*_,y.height+=($-I)*F;break;case"bottom-end":y.width+=(b-C)*_,y.height+=($-I)*F;break;default:return}Z==="move"?(y.translateX=Math.max(0,Math.min(H-y.width,y.translateX)),y.translateY=Math.max(0,Math.min(R-y.height,y.translateY))):(y.width=Math.min(H-y.translateX,Math.max(125,y.width)),y.height=Math.min(R-y.translateY,Math.max(125,y.height))),h(y)},x=()=>{window.removeEventListener("mouseup",z),window.removeEventListener("mousemove",v)},S=()=>{window.addEventListener("mouseup",z),window.addEventListener("mousemove",v)},z=()=>{x(),k.current=null,h(b=>(b&&u({_id:t._id,props:b}),b))},w=(b,$)=>{b.stopPropagation();let{pageX:C,pageY:I}=b;k.current={type:$,pageX:C,pageY:I},S()},O=()=>{(t.type==="sticky-note"||t.type==="text-box")&&s(!1)},N=()=>{o(t._id)},Y=()=>{d||s(!0)};return a?m(r.Fragment,{children:[m("div",{ref:g,className:Ee.container,onClick:N,style:{width:`${a.width}px`,height:`${a.height}px`,transform:`translate(${a.translateX}px, ${a.translateY}px) rotate(${a.rotate}deg)`},children:[L,t._id===n&&e("div",{className:Ee.overlay,onDoubleClick:O,onMouseDown:b=>w(b,"move"),style:{cursor:d?"move":"default",pointerEvents:d?"auto":"none"}})]}),t._id===n&&e($n,{shapeId:t._id,shapeProps:a,shapeRef:g.current,onClose:c,onMouseDown:w,onReset:Y})]}):null},Ke=({shape:t})=>{let[n,o]=r.useState(null);r.useEffect(()=>{o(t.props)},[t.props]);let c=r.useMemo(()=>{if(!n)return null;let{width:u,height:a,backgroundColor:h,borderColor:d,text:s}=n;switch(t.type){case"sticky-note":return e(Je,{text:s,style:{backgroundColor:h}});case"text-box":return e(Qe,{defaultValue:s,readOnly:!0});case"arrow":return e(je,{width:u,height:a,borderColor:d,backgroundColor:h});case"circle":return e(Xe,{width:u,height:a,borderColor:d,backgroundColor:h});case"diamond":return e(Ge,{width:u,height:a,borderColor:d,backgroundColor:h});case"rectangle":return e(We,{width:u,height:a,borderColor:d,backgroundColor:h});case"square":return e(Ue,{width:u,height:a,borderColor:d,backgroundColor:h});case"triangle":return e(Pe,{width:u,height:a,borderColor:d,backgroundColor:h});default:return null}},[t.type,n==null?void 0:n.width,n==null?void 0:n.height,n==null?void 0:n.backgroundColor,n==null?void 0:n.borderColor,n==null?void 0:n.text]);return n?e("div",{className:Ee.container,style:{width:`${n.width}px`,height:`${n.height}px`,transform:`translate(${n.translateX}px, ${n.translateY}px) rotate(${n.rotate}deg)`},children:c}):null},Mn="_container_d2zqk_1",En="_slide_icon_d2zqk_10",Rn="_navigate_btn_d2zqk_29",zn="_slides_d2zqk_53",In="_slide_list_d2zqk_66",Bn="_slide_d2zqk_10",Dn="_active_d2zqk_80",Fn="_board_d2zqk_83",qn="_add_btn_d2zqk_112",Tn="_slide_dropdown_d2zqk_146",T={container:Mn,slide_icon:En,navigate_btn:Rn,slides:zn,slide_list:In,slide:Bn,active:Dn,board:Fn,add_btn:qn,slide_dropdown:Tn};let he={width:224,height:126};const An=({slides:t,activeSlide:n,activeSlideId:o,dimension:c,onSlideChange:u,onAddSlide:a,onDeleteSlide:h})=>{let[d,s]=r.useState(!1),g=r.useRef(null),k=t?t.length:1,E={width:c.width/2,height:c.height/2};r.useEffect(()=>{if(g.current)return setTimeout(()=>{d?window.addEventListener("click",f):window.removeEventListener("click",f)},0),()=>{window.removeEventListener("click",f)}},[d]);let f=S=>{if(!g.current)return;let z=S.target;g.current.contains(z)||L()},L=()=>{s(!d)},v=()=>{n!==0&&u(n-1)},x=()=>{n!==k-1&&u(n+1)};return m(r.Fragment,{children:[m("div",{className:T.container,children:[e("button",{className:T.navigate_btn,disabled:n===0,onClick:v,children:e("i",{className:"bx-chevron-left"})}),m("div",{className:T.slide_icon,onClick:L,children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",width:"46",height:"36",viewBox:"0 0 46 36",children:m("g",{fill:"none",children:[e("rect",{width:"38",height:"22",x:"1",y:"7",stroke:"#3C4043",strokeWidth:"2"}),e("path",{fill:"#5F6368",d:"M8,4 L6,4 L6,0 L46,0 L46,24 L42,24 L42,22 L44,22 L44,2 L8,2 L8,4 Z"}),e("polygon",{fill:"#80868B",points:"26 33 23 36 20 33"})]})}),m("span",{children:[n+1," / ",k]})]}),e("button",{className:T.navigate_btn,disabled:n===k-1,onClick:x,children:e("i",{className:"bx-chevron-right"})})]}),m("div",{ref:g,className:T.slides,"aria-expanded":d,children:[e("button",{className:T.navigate_btn,disabled:n===0,onClick:v,children:e("i",{className:"bx-chevron-left"})}),m("div",{className:T.slide_list,children:[e("button",{className:T.add_btn,onClick:()=>a(0),children:e("i",{className:"bx-plus"})}),t&&t.length>0&&t.map((S,z)=>m(r.Fragment,{children:[m("div",{className:`${T.slide} ${S._id===o?T.active:""}`.trim(),style:{width:`${he.width+4}px`,height:`${he.height+4}px`},"data-mini-slide":S._id,onClick:()=>u(z),children:[m("div",{className:T.board,style:{width:`${c.width}px`,height:`${c.height}px`,transform:`scale(${he.width/c.width},${he.height/c.height})`,backgroundImage:`url(${Q(`/background/${S.props.backgroundImage}`)}.png)`},children:[e("canvas",{width:E.width,height:E.height,"mini-canvas":S.canvas._id}),S.shapes&&S.shapes.map(w=>e(Ke,{shape:w},w._id))]}),e("button",{id:`slide-dropdown-${S._id}`,onClick:w=>w.stopPropagation(),children:e("i",{className:"bx-dots-vertical-rounded"})})]}),e("button",{className:T.add_btn,onClick:()=>a(z+1),children:e("i",{className:"bx-plus"})}),e(ie,{selector:`#slide-dropdown-${S._id}`,className:T.slide_dropdown,placement:"bottom",children:m(ie.Item,{onClick:()=>h(S._id),children:[e("i",{className:"bx-trash"}),e("span",{children:"Delete"})]})})]},S._id))]}),e("button",{className:T.navigate_btn,disabled:n===k-1,onClick:x,children:e("i",{className:"bx-chevron-right"})})]})]})},Yn="_enter_ezio4_1",Zn="_dialog_ezio4_1",Hn="_overlay_ezio4_2",Vn="_fadeIn_ezio4_1",On="_exit_ezio4_6",Xn="_fadeOut_ezio4_1",Gn="_container_ezio4_11",Wn="_content_ezio4_23",te={enter:Yn,dialog:Zn,overlay:Hn,fadeIn:Vn,exit:On,fadeOut:Xn,container:Gn,content:Wn},et=({isOpen:t,children:n,size:o="md",closeClickOnOutSide:c=!0,toggle:u})=>{let a=()=>{t&&u()};return e(ze,{children:e(Ie,{in:t,timeout:300,unmountOnExit:!0,classNames:{enterActive:te.enter,exitActive:te.exit},children:m("div",{children:[e("div",{className:te.container,...c&&{onClick:a},children:e("div",{className:te.dialog,children:e("div",{"data-size":o,className:te.content,onClick:h=>h.stopPropagation(),children:n})})}),e("div",{className:te.overlay})]})})})},Un="_container_1flam_1",Pn="_title_1flam_1",jn="_form_1flam_8",Jn="_field_1flam_17",Qn="_error_msg_1flam_35",Kn="_submit_btn_1flam_47",ne={container:Un,title:Pn,form:jn,field:Jn,error_msg:Qn,submit_btn:Kn},er=({isOpen:t,title:n,toggle:o,onSubmit:c})=>{let{register:u,handleSubmit:a,reset:h,setValue:d,formState:{errors:s}}=Oe();return r.useEffect(()=>{t||(d("title",""),h())},[t]),e(et,{isOpen:t,toggle:o,size:"sm",closeClickOnOutSide:!1,children:m("div",{className:ne.container,children:[e("div",{className:ne.title,children:e("span",{children:"Rename Jam"})}),m("div",{className:ne.form,children:[e("label",{htmlFor:"title",children:"Enter a new name :"}),m("div",{className:ne.field,children:[e("input",{id:"title",placeholder:"Enter title",defaultValue:n,...u("title",{required:{value:!0,message:"Please enter title"}})}),s.title&&m("div",{className:ne.error_msg,children:[e("i",{className:"bx-error-circle"}),e("span",{children:s.title.message})]})]})]}),m("div",{className:ne.submit_btn,children:[e("button",{onClick:a(({title:g})=>c(g)),children:"Ok"}),e("button",{onClick:o,children:"Cancel"})]})]})})},tr="_container_1flam_1",nr="_title_1flam_1",rr="_form_1flam_8",lr="_field_1flam_17",or="_error_msg_1flam_35",ar="_submit_btn_1flam_47",re={container:tr,title:nr,form:rr,field:lr,error_msg:or,submit_btn:ar},sr=({isOpen:t,text:n,toggle:o,onSubmit:c})=>{let{register:u,handleSubmit:a,reset:h,setValue:d,formState:{errors:s}}=Oe();return r.useEffect(()=>{t||(d("text",""),h())},[t]),e(et,{isOpen:t,toggle:o,size:"sm",closeClickOnOutSide:!1,children:m("div",{className:re.container,children:[e("div",{className:re.title,children:e("span",{children:"Rename Jam"})}),m("div",{className:re.form,children:[e("label",{htmlFor:"title",children:"Enter a new name :"}),m("div",{className:re.field,children:[e("input",{id:"title",placeholder:"Enter text",defaultValue:n,...u("text",{required:{value:!0,message:"Please enter text"}})}),s.text&&m("div",{className:re.error_msg,children:[e("i",{className:"bx-error-circle"}),e("span",{children:s.text.message})]})]})]}),m("div",{className:re.submit_btn,children:[e("button",{onClick:a(({text:g})=>c(g)),children:"Ok"}),e("button",{onClick:o,children:"Cancel"})]})]})})},ir=(t,n,o)=>P({url:ge.create(t),method:"post",params:n,data:o}),cr=(t,n)=>P({url:ge.delete(t),method:"delete",params:n}),dr=(t,n)=>P({url:ge.clear(t),method:"put",params:n}),ur=(t,n,o)=>P({url:ge.update(t),method:"put",params:n,data:o}),hr=(t,n,o)=>P({method:"post",url:Re.create(t),params:n,data:o}),Me=(t,n)=>P({url:Re.update(t),method:"put",data:n}),mr=(t,n)=>P({url:Re.delete(t),method:"delete",params:n}),pr=(t,n)=>P({url:pt.update(t),method:"put",headers:{"Content-Type":"application/x-www-form-urlencoded"},data:n}),gr="_container_1yo9h_1",_r="_slide_1yo9h_8",fr="_board_1yo9h_13",vr="_shape_dropdown_1yo9h_23",me={container:gr,slide:_r,board:fr,shape_dropdown:vr};let J={width:3840,height:2160},se={width:J.width/2,height:J.height/2},br={borderColor:"#262626",backgroundColor:"#FFFFFF"};const Cr=()=>{let{user:t,logout:n}=gt(),[o,c]=r.useState(2),[u,a]=r.useState(1),[h,d]=r.useState(0),[s,g]=r.useState(0),[k,E]=r.useState(!1),[f,L]=r.useState({}),{slides:v,title:x}=f,S=r.useRef(null),z=r.useRef(null),[w,O]=r.useState(0),[N,Y]=r.useState(null),[b,$]=r.useState(null),[C,I]=r.useState(!1),[Z,y]=r.useState({x:1,y:1}),[X,j]=r.useState(br),H=r.useRef({pageX:0,pageY:0}),{documentId:R}=_t();wt(x),r.useLayoutEffect(()=>{G()},[]);let _=r.useMemo(()=>{if(!v||v.length===0)return;let l=v.find((i,p)=>p===w);if(l)return l._id},[w,v]);r.useEffect(()=>{if(!_)return;z.current=document.querySelector(`[data-slide='${_}']`),document.querySelector(`[data-mini-slide='${_}']`).scrollIntoView({behavior:"smooth",inline:"center"}),z.current.scrollIntoView({behavior:"smooth",inline:"center"})},[_]),r.useEffect(()=>(window.addEventListener("resize",G),()=>{window.removeEventListener("resize",G)}),[]),r.useEffect(()=>{F()},[R]),r.useEffect(()=>{if(!N)return;let i=v[w].shapes.find(({_id:p})=>p===N);i&&j({borderColor:i.props.borderColor,backgroundColor:i.props.backgroundColor})},[N,v,w]);let F=async()=>{if(R)try{let{data:{data:l}}=await vt(R);L(l)}catch(l){V.error(l==null?void 0:l.message)}},G=()=>{if(!S.current)return;let{clientHeight:l}=S.current,i=l-30,p=i/9*16;y({...Z,x:p/J.width,y:i/J.height})},ve=async()=>{if(!R||!_)return;let l=w;try{await dr(R,{slideId:_});let i=v[l].canvas._id,p=document.querySelector(`[data-canvas='${i}']`);if(p){let D=p.getContext("2d");D&&D.clearRect(0,0,se.width,se.height)}let M=document.querySelector(`[mini-canvas='${i}']`);if(M){let D=M.getContext("2d");D&&D.clearRect(0,0,se.width,se.height)}let B={...f},q=B.slides[w];q.shapes=[],q.canvas.image=null,L(B)}catch(i){V.error(i==null?void 0:i.message)}},be=async(l,i)=>{try{let p=w,M=new FormData;M.append("file",i),await pr(l,M);let B=new FileReader;B.readAsDataURL(i),B.onloadend=()=>{let q=B.result;if(typeof q!="string")return;let D={...f};D.slides[p].canvas.image=q.replace("data:image/png;base64,",""),L(D)}}catch(p){V.error(p==null?void 0:p.message)}},we=l=>{Y(l)},ke=()=>{k||Y(null)},xe=async()=>{if(!(!R||!_||!N||!v||v.length===0))try{let l=v[w].shapes.findIndex(({_id:p})=>p===N);if(l===-1)return;await mr(R,{slideId:_,shapeId:N});let i={...f};i.slides[w].shapes.splice(l,1),L(i),Y(null)}catch(l){V.error(l==null?void 0:l.message)}},tt=r.useMemo(()=>{let l="";return o===0?l=`/cursor/color-${s}.png`:o===1?l="/cursor/color-3.png":o===6&&(l="/cursor/color-5.png"),l?`url(${Q(l)}), auto`:o===4||o===3?"crosshair":"default"},[o,s]),nt=r.useMemo(()=>{if(!(!v||v.length===0))return v[w].props.backgroundImage},[w,v]),K=r.useMemo(()=>!v||v.length===0?void 0:v[w].shapes.find(({_id:i})=>i===N),[N]),rt=({pageX:l,pageY:i})=>{if(!z.current||!_)return;let{width:p,height:M,left:B,top:q}=z.current.getBoundingClientRect(),{clientWidth:D,clientHeight:ee}=z.current,oe=D/p,ae=ee/M,$e=o===3,de=o==5,U={slideId:_,shape:{type:$e?"sticky-note":de?"text-box":pe[u].type,props:{width:1,height:1,rotate:0,translateX:(l-B)*oe,translateY:(i-q)*ae,borderColor:X.borderColor,backgroundColor:X.backgroundColor}}};H.current={pageX:l,pageY:i},$(U),window.addEventListener("mousemove",Be),window.addEventListener("mouseup",lt,{once:!0})},Be=({pageX:l,pageY:i})=>{$(p=>{if(!p||!z.current)return p;let{width:M,height:B,left:q,top:D}=z.current.getBoundingClientRect(),{clientWidth:ee,clientHeight:oe}=z.current,ae=ee/M,$e=oe/B,de={...p},{shape:{props:U}}=de,Fe=l-H.current.pageX,qe=i-H.current.pageY;return U.width=Math.abs(Fe)*ae,U.height=Math.abs(qe)*$e,Fe<0&&(U.translateX=ae*(H.current.pageX-q)-U.width),qe<0&&(U.translateY=ae*(H.current.pageY-D)-U.height),de})},lt=()=>{window.removeEventListener("mousemove",Be),$(l=>(l&&at(l.shape),l))},ot=async l=>{try{let i=v[w].shapes.findIndex(({_id:M})=>M===l._id);if(i===-1)return;await Me(l._id,l);let p={...f};p.slides[w].shapes[i].props=l.props,L(p)}catch(i){V.error(i==null?void 0:i.message)}},at=async l=>{if(!R||!_)return;let i={type:l.type,props:l.props};try{let{data:{data:p}}=await hr(R,{slideId:_},i),M={...f};M.slides[w].shapes.push(p),L(M),Y(p._id),$(null),c(2)}catch(p){V.error(p==null?void 0:p.message)}},st=async l=>{if(R)try{let{data:{data:i}}=await ir(R,{position:l});L(i),O(l)}catch(i){V.error(i==null?void 0:i.message)}},it=async l=>{if(R)try{let i=v.findIndex(({_id:M})=>M===l);if(i===-1)return;await cr(R,{slideId:l});let p={...f};p.slides.splice(i,1),L(p),l===_&&O(0)}catch(i){V.error(i==null?void 0:i.message)}},ct=async l=>{if(R)try{await bt(R,{title:l}),Ce(),L({...f,title:l})}catch(i){V.error(i==null?void 0:i.message)}},Ce=()=>{I(!C)},dt=async l=>{if(!R||!_)return;let i=w;try{await ur(R,{slideId:_},{backgroundImage:l});let p={...f};p.slides[i].props={backgroundImage:l},L(p)}catch(p){V.error(p==null?void 0:p.message)}},De=async(l,i)=>{if(!N)return;let p=w;try{let M=v[w].shapes,B=M.findIndex(({_id:oe})=>oe===N);if(B===-1)return;let q=M[B];if(q.props[l]===i)return;let D={...q};D.props[l]=i,await Me(N,D);let ee={...f};ee.slides[p].shapes[B]=D,L(ee),j({...X,[l]:i})}catch(M){V.error(M==null?void 0:M.message)}},ut=async l=>{if(!N)return;let i=w;try{let p=v[w].shapes.findIndex(({_id:q})=>q===N);if(p===-1)return;let M=v[w].shapes[p];M.props.text=l,await Me(N,{props:M.props});let B={...f};B.slides[i].shapes[p].props.text=l,Le(),L(B)}catch(p){V.error(p==null?void 0:p.message)}},Le=()=>{E(!k)};return m(r.Fragment,{children:[e(Ct,{user:t,title:x,logout:n,toggleTitle:Ce,children:e(An,{slides:v,activeSlide:w,activeSlideId:_,dimension:J,onSlideChange:O,onAddSlide:st,onDeleteSlide:it})}),e(sn,{tool:o,shape:u,sketch:h,sketchColor:s,slideBackGround:nt,borderColor:X.borderColor,backgroundColor:X.backgroundColor,selectedShapeId:N,onSelectTool:c,onSelectShape:a,onSelectSketch:d,onClearSlide:ve,onSelectSketchColor:g,onSelectBackGround:dt,onSelectBorderColor:De,onSelectBackGroundColor:De}),e("div",{ref:S,className:me.container,children:v&&v.length>0&&v.map(l=>e("div",{className:me.slide,children:m("div",{"data-slide":l._id,className:me.board,style:{cursor:tt,width:J.width,height:J.height,transform:`scale(${Z.x},${Z.y}) translate(-50%, -50%)`,backgroundImage:`url(${Q(`/background/${l.props.backgroundImage}`)}.png)`},...[3,4,5].includes(o)&&{onMouseDown:rt},children:[e(un,{tool:o,sketch:h,sketchColor:s,canvas:l.canvas,dimension:se,onUpdateCanvas:be,isActiveSlide:l._id===_}),l.shapes&&l.shapes.map(i=>e(Nn,{shape:i,selectedShapeId:N,onClick:we,onBlur:ke,onUpdateShape:ot},i._id)),b&&b.slideId===l._id&&e(Ke,{shape:b.shape})]})},l._id))}),m(ie,{selector:`button[shape-id='${N}']`,className:me.shape_dropdown,placement:"bottom","aria-disabled":!!N,children:[(K==null?void 0:K.type)==="sticky-note"&&m(ie.Item,{id:"edit-sticky-note",onClick:Le,children:[e("i",{className:"bx-edit"}),e("span",{children:"Edit"})]}),m(ie.Item,{onClick:xe,children:[e("i",{className:"bx-trash"}),e("span",{children:"Delete"})]})]}),e(er,{title:x,isOpen:C,toggle:Ce,onSubmit:ct}),e(sr,{isOpen:k,text:K==null?void 0:K.props.text,toggle:Le,onSubmit:ut})]})};export{Cr as default};
